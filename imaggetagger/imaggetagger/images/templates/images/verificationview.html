{% extends 'images/base.html' %}
{% load static %}
{% block taggerimports %}
<script type="text/javascript" src="{% static 'scripts/verify_scripts.js' %}"></script>
{% endblock %}
{% block individual_script %}
    function init_navigationbuttons() {
        {% if next_annotation %}
        $('#next_button').click(function(){
            $('#verification_form').attr('action', '{% url 'images_verifyview' next_annotation.id %}');
            $('#verification_form').submit();
        });
        {% else %}
        $('#next_button').attr('disabled', 'true');
        $('#next_unverified_button').attr('disabled', 'true');
        {% endif %}

        {% if last_annotation %}
        $('#last_button').click(function(){
            $('#verification_form').attr('action', '{% url 'images_verifyview' last_annotation.id %}');
            $('#verification_form').submit();
        });
        {% else %}
        $('#last_button').attr('disabled', 'true');
        $('#last_unverified_button').attr('disabled', 'true');
        {% endif %}

        {% if next_unverified_annotation %}
        $('#next_unverified_button').click(function(){
            $('#verification_form').attr('action', '{% url 'images_verifyview' next_unverified_annotation.id %}');
            $('#verification_form').submit();
        });
        $('#accept_button').click(function(){
          $('#state').attr('value', 'accept');
          $('#verification_form').attr('action', '{% url 'images_verifyview' next_unverified_annotation.id %}');
          $('#verification_form').submit();
        });

        $('#reject_button').click(function(){
          $('#state').attr('value', 'reject');
          $('#verification_form').attr('action', '{% url 'images_verifyview' next_unverified_annotation.id %}');
          $('#verification_form').submit();
        });
        {% else %}
        $('#last_unverified_button').attr('disabled', 'true');
        $('#accept_button').click(function(){
          $('#state').attr('value', 'accept');
          $('#verification_form').attr('action', '{% url 'images_verifyview' first_annotation.id %}');
          $('#verification_form').submit();
        });

        $('#reject_button').click(function(){
          $('#state').attr('value', 'reject');
          $('#verification_form').attr('action', '{% url 'images_verifyview' first_annotation.id %}');
          $('#verification_form').submit();
        });
        {% endif %}

        {% if last_unverified_annotation %}
        $('#last_unverified_button').click(function(){
            $('#verification_form').attr('action', '{% url 'images_verifyview' last_unverified_annotation.id %}');
            $('#verification_form').submit();
        });
        {% else %}
        $('#last_unverified_button').attr('disabled', 'true');
        {% endif %}
        $('#edit_button').click(function(){window.location.href='{% url 'images_tageditview' annotation.id %}'});
    }



{% endblock %}
{% block bodyblock %}
    <div class="leftlist">
        <a href="{% url 'images_annotationmanageview' image.image_set.id %}"><u><h3 align="center">{{image.image_set.name}}</h3></u></a>
        {% for set_annotation in set_annotations %}
        {% if set_annotation.id == annotation.id %}
        <b id="selected_annotation_row">{{annotation.content}}</b><br>
        {% else %}
        <a href="{% url 'images_verifyview' set_annotation.id %}">{{set_annotation.content}}</a><br>
        {% endif %}
        {% endfor %}
    </div>

    <div class="imageview">
        <div class="wrapper">
            <img id="picture" src="{% static image.full_path %}" alt="Picture {% static image.full_path %} not found!" width="100%" data-x="{{ annotation_x }}" data-y="{{ annotation_y }}" data-width="{{ width }}" data-height="{{ height }}"></br>
            <div id="boundingBox"></div>
        </div>

    </div>

    <div class="toolbox">
      <form id='verification_form' enctype="multipart/form-data" method="post">
        {% csrf_token %}
        <input type='hidden' id='state' name='state' value='blank'>
        <input type='hidden' id='annotation' name='annotation' value='{{ annotation.id }}'>
        <input type='button' id='accept_button' value='YAY'>
        <input type='button' id='reject_button' value='NAY'>
        <input type='button' id='edit_button' value='Edit'>
        <input type='button' id='last_unverified_button' value='Last unverified'>
        <input type='button' id='last_button' value='Last'>
        <input type='button' id='next_button' value='Next'>
        <input type='button' id='next_unverified_button' value='Next unverified'>
      </form>
    </div>
{% endblock %}
